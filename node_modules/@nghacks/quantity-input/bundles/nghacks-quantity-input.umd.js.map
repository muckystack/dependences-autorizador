{"version":3,"file":"nghacks-quantity-input.umd.js","sources":["../../../projects/quantity-input/src/lib/quantity-input.component.ts","../../../projects/quantity-input/src/lib/quantity-input.module.ts","../../../projects/quantity-input/src/public-api.ts","../../../projects/quantity-input/src/nghacks-quantity-input.ts"],"sourcesContent":["import { Component, EventEmitter, forwardRef, Input, OnDestroy, Output } from '@angular/core';\nimport { ControlValueAccessor, FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\n@Component({\n  selector: 'quantity-input',\n  templateUrl: './quantity-input.component.html',\n  styleUrls: ['./quantity-input.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => QuantityInputComponent),\n      multi: true\n    }\n  ]\n})\nexport class QuantityInputComponent implements ControlValueAccessor, OnDestroy {\n\n  quantityCtrl = new FormControl(1);\n\n  @Input() color: string;\n\n  limit = 10000000;\n  @Input('limit')\n  private set limitValue(v: string) {\n    if (!v) { return; }\n    this.limit = parseInt(v);\n  }\n\n  // Allow the input to be disabled, and when it is make it somewhat transparent.\n  disabled = false;\n  @Input('disabled')\n  private set disabledValue(v: boolean) {\n    if (!v) { return; }\n    this.quantityCtrl.disable();\n    this.disabled = v;\n  }\n\n  private _unsubscribeAll: Subject<any> = new Subject();\n\n  @Output() quantityChange = new EventEmitter<number>();\n\n  // Function to call when the quantity changes.\n  onChange = (quantity: number) => {\n    this.quantityChange.emit(quantity);\n  }\n\n  // Function to call when the input is touched (when a star is clicked).\n  onTouched = () => { };\n  get value(): number {\n    return this.quantityCtrl.value;\n  }\n\n  constructor() {\n    this.quantityCtrl.valueChanges\n      .pipe(\n        takeUntil(this._unsubscribeAll)\n      )\n      .subscribe((val) => {\n        if (this.quantityCtrl.value < 1) {\n          this.writeValue(1);\n        }\n        else if (this.quantityCtrl.value > this.limit) {\n          this.writeValue(this.limit);\n        }\n        else {\n          this.writeValue(this.quantityCtrl.value);\n        }\n      });\n  }\n\n  increase(): void {\n    if (!this.disabled) {\n      this.quantityCtrl.setValue((this.quantityCtrl.value + 1));\n    }\n  }\n\n  decrease(): void {\n    if (!this.disabled) {\n      this.quantityCtrl.setValue((this.quantityCtrl.value - 1));\n    }\n  }\n\n  // Allows Angular to update the model (quantity).\n  // Update the model and changes needed for the view here.\n  writeValue(quantity: number): void {\n    this.quantityCtrl.setValue(quantity, { emitEvent: false });\n    this.onChange(this.value);\n  }\n\n  // Allows Angular to register a function to call when the model (quantity) changes.\n  // Save the function as a property to call later here.\n  registerOnChange(fn: (quantity: number) => void): void {\n    this.onChange = fn;\n  }\n\n  // Allows Angular to register a function to call when the input has been touched.\n  // Save the function as a property to call later here.\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  // Allows Angular to disable the input.\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (isDisabled) {\n      this.quantityCtrl.disable();\n    }\n    else {\n      this.quantityCtrl.enable();\n    }\n  }\n\n  public ngOnDestroy(): void {\n    this._unsubscribeAll.next();\n    this._unsubscribeAll.complete();\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { QuantityInputComponent } from './quantity-input.component';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [QuantityInputComponent],\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatIconModule,\n    ReactiveFormsModule\n  ],\n  exports: [QuantityInputComponent]\n})\nexport class QuantityInputModule { }\n","/*\n * Public API Surface of quantity-input\n */\n\nexport * from './lib/quantity-input.component';\nexport * from './lib/quantity-input.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["FormControl","Subject","EventEmitter","takeUntil","Component","NG_VALUE_ACCESSOR","forwardRef","Input","Output","NgModule","CommonModule","MatButtonModule","MatIconModule","ReactiveFormsModule"],"mappings":"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"}